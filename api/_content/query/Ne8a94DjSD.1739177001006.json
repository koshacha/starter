{"_path":"/projects/discord-bot","_dir":"projects","_draft":false,"_partial":false,"_locale":"","title":"Discord Bot","description":"Бот для приватного Discord-сервера, посвященного общению и ролевой игре. Написан на Nest.js.","seoDescription":"Проект Discord-бота на Node.js, Nest.js, Google Firebase и Docker.","year":2024,"sort":4,"published":true,"color":"#F7BFBE","icon":"doodles:star","layout":"project","link":"https://discord.com/oauth2/authorize?client_id=1121418492097343589&permissions=275012176976&scope=bot","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"введение"},"children":[{"type":"text","value":"Введение"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Это мой первый серьезный проект на Node.js без учебы в качестве бэкенд-разработчика. Я создал бота для частного сервера Discord, предназначенного для общения и ролевых игр."}]},{"type":"element","tag":"h2","props":{"id":"ссылки"},"children":[{"type":"text","value":"Ссылки"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Git-репозиторий: "},{"type":"element","tag":"a","props":{"href":"https://github.com/koshacha/paimon-nestjs","rel":["nofollow"]},"children":[{"type":"text","value":"github.com/koshacha/paimon-nestjs"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В качестве основной библиотеки для работы с Discord.js с Nest.js я использовал "},{"type":"element","tag":"a","props":{"href":"https://github.com/necordjs/necord","rel":["nofollow"]},"children":[{"type":"text","value":"эту"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"команды-бота"},"children":[{"type":"text","value":"Команды бота"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Бот может делать следующее."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Подсчитывает посты пользователей в определенных каналах (админ решает, в каких именно) и выводит рейтинг за все время, неделю или месяц."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"С помощью "},{"type":"element","tag":"a","props":{"href":"https://www.random.org/","rel":["nofollow"]},"children":[{"type":"text","value":"RANDOM.ORG"}]},{"type":"text","value":" выдает случайное число/действие."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Поддерживает простую экономику сервера - позволяет пользователям сервера зарабатывать валюту и покупать на нее игровые предметы (которые могут быть созданы администратором)"}]}]},{"type":"element","tag":"h2","props":{"id":"детали-реализации"},"children":[{"type":"text","value":"Детали реализации"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Язык разработки: Node.js"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Фреймворк Nest.js"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"База данных: Google Firebase"}]}]},{"type":"element","tag":"h2","props":{"id":"прогресс-в-работе"},"children":[{"type":"text","value":"Прогресс в работе"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"В процессе работы я познакомился с Nest.js и Discord.js поближе, получил опыт разработки ботов. Я настроил Github Actions так, чтобы образ на Docker Hub обновлялся после изменений в основной ветке репозитория."}]},{"type":"element","tag":"h2","props":{"id":"запуск-бота-с-помощью-docker-compose"},"children":[{"type":"text","value":"Запуск бота с помощью docker compose"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Прежде всего, вам нужно создать файл docker-compose.yml со следующим содержимым:"}]},{"type":"element","tag":"pre","props":{"className":"language-yaml shiki shiki-themes dark-plus","code":"name: paimon\nservices:\n  paimon-bot:\n    ports:\n      - 8000:8000\n    volumes:\n      - .:/usr/src/app\n    env_file:\n      - .env\n    restart: always\n    logging:\n      options:\n        max-size: 1g\n    image: koshacha/paimon-bot:master\n","language":"yaml","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"paimon\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"services"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"  paimon-bot"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    ports"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"8000:8000\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    volumes"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":".:/usr/src/app\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    env_file"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":".env\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    restart"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"always\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    logging"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"      options"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"        max-size"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"1g\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"koshacha/paimon-bot:master\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Вам также нужно будет создать файл .env и поместить в него следующее."}]},{"type":"element","tag":"pre","props":{"className":"language-text shiki shiki-themes dark-plus","code":"DISCORD_TOKEN=\"\"\nDEV_GUILD=\"\"\nGOOGLE_APPLICATION_CREDENTIAL=\"\"\nGOOGLE_PROJECT_ID=\"\"\nGOOGLE_CLIENT_EMAIL=\"\"\nGOOGLE_PRIVATE_KEY=\"\"\n","language":"text","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"DISCORD_TOKEN=\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"DEV_GUILD=\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"GOOGLE_APPLICATION_CREDENTIAL=\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"GOOGLE_PROJECT_ID=\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"GOOGLE_CLIENT_EMAIL=\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"GOOGLE_PRIVATE_KEY=\"\"\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Конечно, сначала вам нужно будет получить токен Discord и ключи Google Firebase."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Все, что вам нужно сделать, это запустить приложение с помощью команды:"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes dark-plus","code":"docker-compose up -d\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"docker-compose"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" up"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" -d\n"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"введение","depth":2,"text":"Введение"},{"id":"ссылки","depth":2,"text":"Ссылки"},{"id":"команды-бота","depth":2,"text":"Команды бота"},{"id":"детали-реализации","depth":2,"text":"Детали реализации"},{"id":"прогресс-в-работе","depth":2,"text":"Прогресс в работе"},{"id":"запуск-бота-с-помощью-docker-compose","depth":2,"text":"Запуск бота с помощью docker compose"}]}},"_type":"markdown","_id":"content:projects:Discord Bot.md","_source":"content","_file":"projects/Discord Bot.md","_stem":"projects/Discord Bot","_extension":"md"}