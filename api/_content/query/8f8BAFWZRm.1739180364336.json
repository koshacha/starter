{"_path":"/en/projects/discord-bot","_dir":"projects","_draft":false,"_partial":false,"_locale":"","title":"Discord Bot","description":"The bot for a private Discord server dedicated to communication and roleplay. Written with Nest.js.","seoDescription":"Discord bot project with Node.js, Nest.js, Google Firebase, and Docker.","year":2024,"sort":4,"published":true,"color":"#F7BFBE","icon":"doodles:star","layout":"project","link":"https://discord.com/oauth2/authorize?client_id=1121418492097343589&permissions=275012176976&scope=bot","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"introduction"},"children":[{"type":"text","value":"Introduction"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is my first serious non-study project on Node.js as a backend developer. I created a bot for a private Discord server dedicated to communication and roleplay."}]},{"type":"element","tag":"h2","props":{"id":"links"},"children":[{"type":"text","value":"Links"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Git repository: "},{"type":"element","tag":"a","props":{"href":"https://github.com/koshacha/paimon-nestjs","rel":["nofollow"]},"children":[{"type":"text","value":"github.com/koshacha/paimon-nestjs"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As the main library for dealing with Discord.js with Nest.js I used "},{"type":"element","tag":"a","props":{"href":"https://github.com/necordjs/necord","rel":["nofollow"]},"children":[{"type":"text","value":"this one"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"bot-commands"},"children":[{"type":"text","value":"Bot commands"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The bot can do the following."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Counts member posts in certain channels (admin decides which ones) and outputs a rating for the whole time, week or month."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"With the power of "},{"type":"element","tag":"a","props":{"href":"https://www.random.org/","rel":["nofollow"]},"children":[{"type":"text","value":"RANDOM.ORG"}]},{"type":"text","value":" gives a random number/action"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Supports simple server economy - allows server users to earn currency and buy game items with it (which can be created by admin)"}]}]},{"type":"element","tag":"h2","props":{"id":"realizations-details"},"children":[{"type":"text","value":"Realizations details"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Development Language: Node.js"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Nest.js framework"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Database: Google Firebase"}]}]},{"type":"element","tag":"h2","props":{"id":"work-progress"},"children":[{"type":"text","value":"Work progress"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the course of work I got to know Nest.js and Discord.js better, gained experience in bot development. I configured Github Actions so that the image at Docker Hub would be updated after changes in the main repository branch."}]},{"type":"element","tag":"h2","props":{"id":"launch-the-bot-using-docker-compose"},"children":[{"type":"text","value":"Launch the bot using docker compose"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First of all, you will need to create a docker-compose.yml file with the following contents:"}]},{"type":"element","tag":"pre","props":{"className":"language-yaml shiki shiki-themes dark-plus","code":"name: paimon\nservices:\n  paimon-bot:\n    ports:\n      - 8000:8000\n    volumes:\n      - .:/usr/src/app\n    env_file:\n      - .env\n    restart: always\n    logging:\n      options:\n        max-size: 1g\n    image: koshacha/paimon-bot:master\n","language":"yaml","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"paimon\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"services"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"  paimon-bot"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    ports"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"8000:8000\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    volumes"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":".:/usr/src/app\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    env_file"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":".env\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    restart"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"always\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    logging"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"      options"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"        max-size"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"1g\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"koshacha/paimon-bot:master\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You'll also need to create an .env file and put it next to it."}]},{"type":"element","tag":"pre","props":{"className":"language-text shiki shiki-themes dark-plus","code":"DISCORD_TOKEN=\"\"\nDEV_GUILD=\"\"\nGOOGLE_APPLICATION_CREDENTIAL=\"\"\nGOOGLE_PROJECT_ID=\"\"\nGOOGLE_CLIENT_EMAIL=\"\"\nGOOGLE_PRIVATE_KEY=\"\"\n","language":"text","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"DISCORD_TOKEN=\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"DEV_GUILD=\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"GOOGLE_APPLICATION_CREDENTIAL=\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"GOOGLE_PROJECT_ID=\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"GOOGLE_CLIENT_EMAIL=\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"GOOGLE_PRIVATE_KEY=\"\"\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You'll need to get a Discord token and Google Firebase keys first, of course."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All you have to do is run the application with the command:"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes dark-plus","code":"docker-compose up -d\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"docker-compose"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" up"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" -d\n"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"introduction","depth":2,"text":"Introduction"},{"id":"links","depth":2,"text":"Links"},{"id":"bot-commands","depth":2,"text":"Bot commands"},{"id":"realizations-details","depth":2,"text":"Realizations details"},{"id":"work-progress","depth":2,"text":"Work progress"},{"id":"launch-the-bot-using-docker-compose","depth":2,"text":"Launch the bot using docker compose"}]}},"_type":"markdown","_id":"content:en:projects:Discord Bot.md","_source":"content","_file":"en/projects/Discord Bot.md","_stem":"en/projects/Discord Bot","_extension":"md"}